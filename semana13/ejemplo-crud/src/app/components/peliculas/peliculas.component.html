<div class="peliculas-container">
  <!-- Header del componente -->
  <div class="header">
    <h1>ğŸ¬ GestiÃ³n de PelÃ­culas</h1>
    <p class="subtitle">CRUD completo para administrar tu colecciÃ³n de pelÃ­culas</p>
  </div>

  <!-- Formulario para agregar/editar pelÃ­culas -->
  <div class="form-section">
    <div class="form-card">
      <h2>{{ modoEdicion ? 'âœï¸ Editar PelÃ­cula' : 'â• Agregar Nueva PelÃ­cula' }}</h2>
      
      <form (ngSubmit)="modoEdicion ? actualizarPelicula() : agregarPelicula()" #peliculaForm="ngForm">
        <div class="form-group">
          <label for="nombre">Nombre de la PelÃ­cula:</label>
          <input 
            type="text" 
            id="nombre" 
            name="nombre"
            [(ngModel)]="nuevaPelicula.nombre"
            placeholder="Ej: El Padrino"
            required
            class="form-control">
        </div>

        <div class="form-group">
          <label for="urlImagen">URL de la Imagen:</label>
          <input 
            type="url" 
            id="urlImagen" 
            name="urlImagen"
            [(ngModel)]="nuevaPelicula.urlImagen"
            placeholder="https://ejemplo.com/imagen.jpg"
            required
            class="form-control">
        </div>

        <div class="form-group">
          <label for="plot">Sinopsis:</label>
          <textarea 
            id="plot" 
            name="plot"
            [(ngModel)]="nuevaPelicula.plot"
            placeholder="Describe brevemente la trama de la pelÃ­cula..."
            required
            rows="4"
            class="form-control"></textarea>
        </div>

        <div class="form-actions">
          <button 
            type="submit" 
            class="btn btn-primary"
            [disabled]="!peliculaForm.form.valid">
            {{ modoEdicion ? 'ğŸ’¾ Actualizar' : 'â• Agregar' }}
          </button>
          
          <button 
            type="button" 
            class="btn btn-secondary"
            (click)="cancelarEdicion()"
            *ngIf="modoEdicion">
            âŒ Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Lista de pelÃ­culas -->
  <div class="peliculas-section">
    <h2>ğŸ“‹ Lista de PelÃ­culas ({{ peliculas.length }})</h2>
    
    <!-- Estado de carga -->
    <div *ngIf="cargando" class="loading">
      <div class="spinner"></div>
      <p>Cargando pelÃ­culas...</p>
    </div>

    <!-- Mensaje cuando no hay pelÃ­culas -->
    <div *ngIf="!cargando && peliculas.length === 0" class="empty-state">
      <p>ğŸ­ No hay pelÃ­culas registradas</p>
      <p>Â¡Agrega tu primera pelÃ­cula usando el formulario de arriba!</p>
    </div>

    <!-- Grid de pelÃ­culas -->
    <div *ngIf="!cargando && peliculas.length > 0" class="peliculas-grid">
      <div 
        *ngFor="let pelicula of peliculas" 
        class="pelicula-card"
        [class.editing]="peliculaSeleccionada?.id === pelicula.id">
        
        <!-- Imagen de la pelÃ­cula -->
        <div class="pelicula-imagen">
          <img 
            [src]="pelicula.urlImagen" 
            [alt]="pelicula.nombre"
            (error)="onImageError($event)">
        </div>

        <!-- InformaciÃ³n de la pelÃ­cula -->
        <div class="pelicula-info">
          <h3 class="pelicula-titulo">{{ pelicula.nombre }}</h3>
          <p class="pelicula-plot">{{ pelicula.plot }}</p>
          <div class="pelicula-id">ID: {{ pelicula.id }}</div>
        </div>

        <!-- Botones de acciÃ³n -->
        <div class="pelicula-actions">
          <button 
            class="btn btn-edit"
            (click)="editarPelicula(pelicula)"
            title="Editar pelÃ­cula">
            âœï¸ Editar
          </button>
          
          <button 
            class="btn btn-delete"
            (click)="eliminarPelicula(pelicula.id)"
            title="Eliminar pelÃ­cula">
            ğŸ—‘ï¸ Eliminar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- InformaciÃ³n adicional -->
  <div class="info-section">
    <div class="info-card">
      <h3>â„¹ï¸ InformaciÃ³n del Proyecto</h3>
      <ul>
        <li><strong>Framework:</strong> Angular 17</li>
        <li><strong>Arquitectura:</strong> Componentes + Servicios</li>
        <li><strong>Almacenamiento:</strong> Arreglo en memoria</li>
        <li><strong>Funcionalidades:</strong> CRUD completo</li>
      </ul>
    </div>
  </div>
</div> 